<div class="content">
    <nav class="menu-navigation-icons">
      <a href="#" class="menu-silver" (click)="TalepDetayGetir()"><i class="fas fa-sync-alt"></i><span>Yenile</span></a> 
      <a href="#" *ngIf="yetki.Ekle && master.SapSiparisNo<=0" class="menu-green" (click)="kaydet(true)"><i class="fas fa-save"></i><span>{{master.Id>0 ? 'Kaydet':'Kaydet'}}</span></a> 
      <a *ngIf="master.Durum!='T' && yetki.Ekle && master.SapSiparisNo<=0" href="#" class="menu-blue" (click)="kalemEklemod(modtlpkalemekle)"><i class="fas fa-plus-circle"></i><span>Kalem Ekle</span></a>
      <a href="#" (click)="belgeYukleModal(belgeyukle)" *ngIf="this.evrekyuklegoster" class="menu-red" style="width: 95px!important;"><i class="fas fa-file-upload"></i><span>Talep Belge</span></a>
      <a *ngIf="this.silgoster && yetki.Sil && master.SapSiparisNo<=0" href="#" class="menu-red" (click)="kayitsil()"><i class="fas fa-minus-circle"></i><span>Sil</span></a>
      <a *ngIf="master.Id>0 && master.SapSiparisNo<=0 && sipyetki.Ekle && master.DurumId==1" href="#" class="menu-blue" (click)="siparisolustur()"><i class="fas fa-send"></i><span>Sipariş</span></a>
      <a *ngIf="master.Id>0 && master.SapSiparisNo>0 && teslimyetki.Ekle && master.DurumId==2" href="#" class="menu-green" (click)="teslimEt()"><i class="fas fa-send"></i><span>Teslim</span></a>
    
      <a href="#" (click)="this.gridTalepDetay.instance.showColumnChooser()" style="float: right!important;" class="menu-blue" ><i class="fas fa-filter"></i><span>Sütun Seç</span></a> 
      <a href="#" (click)="this.gridTalepDetay.instance.exportToExcel(false)" style="float: right!important;" class="menu-green" ><i class="fas fa-file-excel"></i><span>Excel</span></a> 
      <a href="#" (click)="formYazdir(talepform)"  *ngIf="master.Id>0 && yetki.Export" class="menu-magenta" style="float: right!important;"><i class="fas fa-file-pdf"></i><span>Pdf</span></a> 
    
      
    </nav>
    <div style="clear:both"></div>
        
    <div class="panel panel-default">
        <div class="panel-body">
            <label class="panel-baslik">Sipariş ve Müşteri Bilgileri</label>
            <div class="clear-fix"></div> 

            
            <mat-form-field appearance="outline" [style.width.%]="50" >
                <mat-label>Müşteri Adı</mat-label>
                <input matInput placeholder="Müşteri Adı" [(ngModel)]="master.MusteriAdi" autocomplete="off">
            </mat-form-field>

            <mat-form-field appearance="outline" [style.width.%]="25" >
                <mat-label>Siparişi Veren Kişi</mat-label>
                <input matInput placeholder="Siparişi Veren Kişi" [(ngModel)]="master.SiparisVerenKisi" autocomplete="off">
            </mat-form-field>

            <mat-form-field appearance="outline" [style.width.%]="25" >
                <mat-label>Cep Telefon</mat-label>
                <input matInput placeholder="Cep Telefon" [(ngModel)]="master.Gsm" autocomplete="off" mask="000 000 00 00">
            </mat-form-field>

            <mat-form-field appearance="outline" [style.width.%]="25" >
                <mat-label>Telefon</mat-label>
                <input matInput placeholder="Telefon" [(ngModel)]="master.Telefon1" autocomplete="off" mask="000 000 00 00">
            </mat-form-field>            

            <mat-form-field appearance="outline" [style.width.%]="25" >
                <mat-label>Email</mat-label>
                <input matInput placeholder="Email" [(ngModel)]="master.Email" autocomplete="off">
            </mat-form-field>

            <mat-form-field appearance="outline" [style.width.%]="17" >
                <mat-label>Vergi Dairesi</mat-label>
                <input matInput placeholder="Vergi Dairesi" [(ngModel)]="master.VergiDairesi" autocomplete="off">
            </mat-form-field>
         

            <mat-form-field appearance="outline" [style.width.%]="17">
              <mat-label>Vergi No</mat-label>
                  <input matInput type="search" [(ngModel)]="master.VergiNo" autocomplete="off" maxlength="10" minlength="10" mask="0000000000"> 
    
               <button mat-button matSuffix mat-icon-button (click)="musteriSorgula('Vkn')">
                <mat-icon style="color: #007bff;font-weight: bold;">search</mat-icon>
              </button>
    
              <button *ngIf="master.VergiNo!=''" mat-button matSuffix mat-icon-button (click)="musteriTemizle('Vkn')">
                <mat-icon style="color: red;font-weight: bold">cancel</mat-icon>
              </button>   
            </mat-form-field>
    
          <mat-form-field appearance="outline" [style.width.%]="16">
            <mat-label>Tckn</mat-label>
                <input matInput type="search" [(ngModel)]="master.Tckn" autocomplete="off" maxlength="11" minlength="11" mask="00000000000"> 
  
             <button mat-button matSuffix mat-icon-button (click)="musteriSorgula('Tckn')">
              <mat-icon style="color: #007bff;font-weight: bold;">search</mat-icon>
            </button>
  
            <button *ngIf="master.Tckn!=''" mat-button matSuffix mat-icon-button (click)="musteriTemizle('Tckn')">
              <mat-icon style="color: red;font-weight: bold">cancel</mat-icon>
            </button>   
          </mat-form-field>
 

            <mat-form-field appearance="outline" [style.width.%]="50" >
                <mat-label>Adres</mat-label>
                <input matInput placeholder="Adres" [(ngModel)]="master.Adres" autocomplete="off">
            </mat-form-field>

            <mat-form-field appearance="outline" [style.width.%]="25">
                <mat-label>Şehir</mat-label>
                  <mat-select  #singleSelect [(ngModel)]="master.SehirKod" (selectionChange)="onSehirChg($event)">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="formSehir"  
                       placeholderLabel="Ara..."
                       noEntriesFoundLabel="Kayıt Bulunamadı...">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let sh of filterSehir | async" [value]="sh.Code" >
                      {{sh.Name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
      
              <mat-form-field appearance="outline" [style.width.%]="25">
                <mat-label>İlçe</mat-label>
                  <mat-select  #singleSelect [(ngModel)]="master.IlceKod">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="formilce"  
                       placeholderLabel="Ara..."
                       noEntriesFoundLabel="Kayıt Bulunamadı...">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let si of filterilcer | async" [value]="si.Id" >
                      {{si.IlceAdi}}
                    </mat-option>
                  </mat-select>
                </mat-form-field> 
          
        </div>
    </div>
     
     <div class="clear-fix"></div> 

     <div class="panel panel-default">            
        <div class="panel-body">
            <label class="panel-baslik">Teslimat Bilgileri</label>
            <div class="clear-fix"></div> 

            <mat-form-field appearance="outline" [style.width.%]="25">
              <mat-label>Teslimat Şube</mat-label>
                <mat-select  #singleSelect [(ngModel)]="master.TeslimatSubeId">
                  <mat-option>
                    <ngx-mat-select-search [formControl]="formSube"  
                     placeholderLabel="Ara..."
                     noEntriesFoundLabel="Kayıt Bulunamadı...">
                    </ngx-mat-select-search>
                  </mat-option>
                  <mat-option *ngFor="let sh of filterSube | async" [value]="sh.DepoKodu" >
                    {{sh.DepoAdi}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

            <mat-form-field appearance="outline" [style.width.%]="25" >
                <mat-label>Teslimat Kişi</mat-label>
                <input matInput placeholder="Teslimat Kişi" [(ngModel)]="master.TeslimatKisi"> 
            </mat-form-field> 

            <mat-form-field appearance="outline" [style.width.%]="25" >
                <mat-label>Teslimat Cep Telefon</mat-label>
                <input matInput placeholder="Teslimat Cep Telefon" [(ngModel)]="master.TeslimatGsm" mask="000 000 00 00"> 
            </mat-form-field>  

            <mat-form-field appearance="outline"   [style.width.%]="15" >
                <mat-label>Teslim Tarih</mat-label> 
                <input matInput [matDatepicker]="dp2" placeholder="Teslim Tarih"  [(ngModel)]="master.TeslimTarih" >
              <mat-datepicker-toggle matSuffix [for]="dp2"></mat-datepicker-toggle>
              <mat-datepicker #dp2></mat-datepicker>
            </mat-form-field> 

            <input class="input-saat" type="time" [(ngModel)]="master.TeslimSaati" step="300"/>
 

            <div class="clear-fix"></div>            

            <mat-form-field appearance="outline" [style.width.%]="50" >
                <mat-label>Teslimat Adres</mat-label>
                <input matInput placeholder="Teslimat Adres" [(ngModel)]="master.TeslimatAdres" autocomplete="off">
            </mat-form-field> 

            <mat-form-field appearance="outline" [style.width.%]="25">
                <mat-label>Teslim Şehir</mat-label>
                  <mat-select  #singleSelect [(ngModel)]="master.TeslimSehirKod" (selectionChange)="onSehirTeslimChg($event)">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="formSehir"  
                       placeholderLabel="Ara..."
                       noEntriesFoundLabel="Kayıt Bulunamadı...">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let sh of filterSehir | async" [value]="sh.Code" >
                      {{sh.Name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
      
              <mat-form-field appearance="outline" [style.width.%]="25">
                <mat-label>Teslim İlçe</mat-label>
                  <mat-select  #singleSelect [(ngModel)]="master.TeslimIlceKod">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="formilceTeslim"  
                       placeholderLabel="Ara..."
                       noEntriesFoundLabel="Kayıt Bulunamadı...">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let si of filterilcerTeslim | async" [value]="si.Id" >
                      {{si.IlceAdi}}
                    </mat-option>
                  </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" [style.width.%]="50" >
              <mat-label>Pasta Üstü Yazı</mat-label>
              <input matInput placeholder="Pasta Üstü Yazı" [(ngModel)]="master.PastaUstuYazi" autocomplete="off">
          </mat-form-field> 

          <mat-form-field appearance="outline" [style.width.%]="50" >
              <mat-label>Açıklama</mat-label>
              <input matInput placeholder="Açıklama" [(ngModel)]="master.Aciklama" autocomplete="off">
          </mat-form-field> 


           

        </div>
    </div>

    <div class="clear-fix"></div> 
     
    <dx-data-grid class="devgrid25"  #gridTalepDetay 
    [dataSource]="talepdetay"   
    [showBorders]="true" 
    [remoteOperations]="true"
    [showColumnLines]="false"
    [showRowLines]="true" 
    [rowAlternationEnabled]="true"
    [focusedRowEnabled]="true"
    [columnAutoWidth]="true"
    [allowColumnResizing]="true"
    keyExpr="Id" 
    columnResizingMode = "widget"  
    (onEditingStart)="overrideOnValueChanged($event)"
    (onRowUpdated)="CellDegisti($event)" 
    (onSelectionChanged)="silgosterChanged($event)"
    > 
    <dxo-column-fixing [enabled]="true"></dxo-column-fixing>
    <dxo-filter-row [visible]="true"></dxo-filter-row>
    <dxo-header-filter [visible]="true"></dxo-header-filter>
    <dxo-header-filter [allowSearch]="true"></dxo-header-filter>
    <dxo-load-panel [enabled]="true"></dxo-load-panel> 
    <dxo-column-chooser [enabled]="false" mode="select"></dxo-column-chooser>
    <dxo-scrolling mode="virtual" showScrollbar="'always'" useNative="false" scrollByThumb="true" ></dxo-scrolling> 
    <dxo-paging [pageSize]="30"> </dxo-paging>
    <dxo-pager [visible]="true" displayMode="'compact'" [showPageSizeSelector]="false" [showInfo]="true" [showNavigationButtons]="true"></dxo-pager> 
    <dxo-selection [selectAllMode]="allMode" [showCheckBoxesMode]="checkBoxesMode" mode="multiple"></dxo-selection>
     <dxo-editing mode="cell" [allowUpdating]="true"></dxo-editing>
    
     <dxi-column caption="#" cellTemplate="cellTarihce" [style.width.%]="10" alignment="center" [allowEditing]="false"></dxi-column>
     <div *dxTemplate="let cell of 'cellTarihce'"> 
       <i class="fas fa-info-circle" (click)="tarihceDetay(belgetarihcemod,cell.data)" title="Talep Tarihçe Detayını Görebilirsiniz" style="cursor:pointer"></i>
     </div> 
    
    <dxi-column dataField="UrunKodu" caption="Stok Kodu" [style.width.%]="10" [allowEditing]="false" ></dxi-column>
    <dxi-column dataField="UrunAdi" caption="Stok Adı" [style.width%]="10" [allowEditing]="false" ></dxi-column>
       
    <dxi-column dataField="Miktar" [style.width.%]="10"  caption="Miktar" alignment="right" dataType="number" format="#,##0.00"> </dxi-column> 
    <dxi-column dataField="Fiyat" [style.width.%]="10" caption="Birim Tutar"  [allowEditing]="true" alignment="right" dataType="number" format="#,##0.00"></dxi-column> 
    <dxi-column dataField="IskontoOran" [style.width.%]="10" caption="İskonto %"  [allowEditing]="true" alignment="right" dataType="number" format="#,##0.00"></dxi-column> 
    <dxi-column dataField="ToplamTutar" [style.width.%]="10" caption="Toplam Tutar"  [allowEditing]="false" alignment="right" dataType="number" format="#,##0.00"></dxi-column> 
    
    <dxi-column dataField="Birim" caption="Birim" [style.width.%]="10" [allowEditing]="false" ></dxi-column>
<!--  
    <dxi-column
    dataField="DepoKodu"
    caption="Teslim Şube"
    [style.width.%]="10" alignment="center" [allowEditing]="true">         
    <dxo-lookup
        [dataSource]="depolist"
        displayExpr="DepoAdi"
        valueExpr="DepoKodu">
    </dxo-lookup>
    </dxi-column>
       -->
    <dxi-column dataField="Aciklama" caption="Ürün/Hizmet Açıklama" [width]="200" [allowEditing]="true"></dxi-column> 
      
    <dxi-column dataField="TalepDurum" caption="Talep Durum" [width]="200" [allowEditing]="false" alignment="center" [visible]="false"></dxi-column> 
    
     <dxi-column dataField="SapTalepNo" caption="Sap Talep No" [style.width%]="10" [allowEditing]="false" alignment="center" [visible]="false"></dxi-column> 
    <dxi-column dataField="SapTeklifNo" caption="Sap Teklif No" [style.width%]="10" [allowEditing]="false" alignment="center" [visible]="false"></dxi-column> 
    <dxi-column dataField="SapSiparisNo" caption="Sap Sipariş No" [style.width%]="10" [allowEditing]="false" alignment="center" [visible]="false"></dxi-column> 
     
    <dxi-column [style.width.%]="10" caption="Ekleyen" dataField="Ekleyen"  [visible]="false"></dxi-column> 
    <dxi-column [style.width.%]="10" caption="Kayıt Tarih" dataField="EkTarih" dataType="date" format="dd.MM.yyyy HH:mm"  [visible]="false"></dxi-column> 
    <dxi-column [style.width.%]="10" caption="Guncelleyen" dataField="Guncelleyen"   [visible]="false"></dxi-column> 
    <dxi-column [style.width.%]="10" caption="Güncelleme Tarih" dataField="GuncelTarih" dataType="date" format="dd.MM.yyyy HH:mm"  [visible]="false"></dxi-column>
     
    
    </dx-data-grid> 
     
    </div>
    
    <ng-template #modtlpkalemekle let-modal>
      <div class="modal-header">
        <h4 class="modal-title" >Kalem Ekle</h4> 
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="input-group">
    
            <mat-form-field appearance="outline" [style.width.%]="25" >
              <mat-label>Stok Grup</mat-label>
                <mat-select  #singleSelect [(ngModel)]="StokGrupId" (ngModelChange)="kalemAraDef()">
                  <mat-option>
                    <ngx-mat-select-search [formControl]="formStokGrup"  
                     placeholderLabel="Ara..."
                     noEntriesFoundLabel="Kayıt Bulunamadı...">
                    </ngx-mat-select-search>
                  </mat-option>
                  <mat-option *ngFor="let gr of filterStokGrup | async" [value]="gr.ItmsGrpCod" >
                    {{gr.ItmsGrpNam}}
                  </mat-option>
                </mat-select>
                <button mat-button matSuffix *ngIf="StokGrupId>0" mat-icon-button (click)="defGrup($event)">
                   <mat-icon>close</mat-icon>
               </button>
              </mat-form-field> 
    
            <input autofocus [style.width.%]="70" type="text" class="form-control" autocomplete="off" placeholder="Aramak İstediğiniz Ürünü Kısaca Yazın..." [(ngModel)]="kalemkeyword" (keyup)="kalemAra($event)">
            <span class="input-group-btn">
              <button class="btn btn-danger btn-mini" title="Arama Temizle" (click)="aramaTemizle()">
                <span class="fas fa-window-close"></span>
              </button>
          </span>
        </div>
        </div>
        <div style="clear:both"></div>
        <hr/>
    
        <dx-data-grid  class="devgrid30"
        [dataSource]="kalemlist"
        [showBorders]="true"
        [showRowLines]="true"
        [remoteOperations]="true"
        [showColumnLines]="true"
        [showRowLines]="true" 
        [rowAlternationEnabled]="true"
        [focusedRowEnabled]="true"
        [columnAutoWidth]="true"
        [allowColumnResizing]="true"
        keyExpr="DocEntry" 
        columnResizingMode = "widget" 
        [allowColumnReordering]="true"
        (onCellPrepared)="onCellPreparedKalem($event)"  
        > 
        <dxo-column-fixing [enabled]="true"></dxo-column-fixing>
        <dxo-filter-row [visible]="true"></dxo-filter-row>
        <dxo-header-filter [visible]="true"></dxo-header-filter>
        <dxo-header-filter [allowSearch]="true"></dxo-header-filter> 
        <dxo-column-chooser [enabled]="false" mode="select"></dxo-column-chooser>
        <dxo-scrolling 
        mode="virtual"
        showScrollbar="'always'"
        useNative="false"
        scrollByThumb="true" >
      </dxo-scrolling> 
        <dxo-selection mode="single"></dxo-selection>  
        
         <dxo-editing 
              mode="cell"
              [allowUpdating]="true" >
         </dxo-editing>
         
        <dxi-column dataField="ItmsGrpNam" caption="Grup Adı" [style.width.%]="10" [allowEditing]="false"></dxi-column>
        <dxi-column dataField="ItemCode" caption="Stok Kodu" [style.width.%]="10" [allowEditing]="false" [visible]="false"></dxi-column>
        <dxi-column dataField="ItemName" caption="Stok Adı" [style.width.%]="10" [allowEditing]="false"></dxi-column>  
        
       
        <dxi-column dataField="Miktar" caption="Miktar" [style.width.%]="10" alignment="center" format="#,##0.####" onfocus="this.select()"></dxi-column>    
        <dxi-column dataField="Birim" caption="Birim" [style.width.%]="10" [allowEditing]="false" alignment="center" ></dxi-column>
 
        <dxi-column dataField="BirimTutar" [style.width.%]="10" caption="Birim Tutar"  [allowEditing]="true" alignment="center" dataType="number" format="#,##0.00" onfocus="this.select()"></dxi-column> 
        <dxi-column dataField="IskontoOran" [style.width.%]="10" caption="İskonto %"  [allowEditing]="true" alignment="center" dataType="number" format="#,##0.00" onfocus="this.select()"></dxi-column> 

        <!-- <dxi-column
        dataField="DepoKodu"
        caption="Teslim Şube"
        [style.width.%]="10" alignment="center">         
        <dxo-lookup
            [dataSource]="depolist"
            displayExpr="DepoAdi"
            valueExpr="DepoKodu">
        </dxo-lookup>
        </dxi-column> -->
        
        <dxi-column  
        dataField="Aciklama"  
        caption="Ürün/Hizmet Açıklama"  
        [style.width.%]="10">
        </dxi-column>   
        
        <dxi-column caption="Belge Yükle" cellTemplate="cellBElge" [style.width.%]="10" alignment="center" [allowEditing]="false" ></dxi-column>
        <div *dxTemplate="let cell of 'cellBElge'">   
          <!-- <input name="Yüklemek İstediğiniz Dosyaları Seçiniz" [ngModel]="cell.data.Files" title="Yüklemek İstediğiniz Dosyaları Seçiniz" type="file" multiple (change)="uploadFile(cell.data,$event)" /> -->
      
          <label [for]="('inputFile'+cell.data.DocEntry)" class="btn btn-xs btn-default" style="margin-bottom: 0px!important;">Dosya Seç <span *ngIf="cell.data.Files>0"> - {{cell.data.Files}}</span> </label>
          <input type="file" [id]="('inputFile'+cell.data.DocEntry)" multiple [name]="('inputFile'+cell.data.DocEntry)" class="d-none" (change)="uploadFile(cell.data,$event)">
      
        </div> 
      
        </dx-data-grid>   
         
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="modal.dismiss('Cross click')">Kapat</button>
        <button type="button" class="btn btn-success" (click)="listeyeekle()">Listeye Ekle</button>
      </div>
    </ng-template>
    
    <ng-template #firmasec let-modal>
      <div class="modal-header">
        <h4 class="modal-title" >Firma Seç</h4> 
      </div>
      <div class="modal-body"> 
          <div class="row">
              <div class="input-group">
                <input autofocus type="text" class="form-control" autocomplete="off" placeholder="Aramak İstediğiniz Firmayı Kısaca Yazın..." [(ngModel)]="firmakalemkeyword" (keyup)="firmaAra($event)">
                <span class="input-group-btn">
                  <button class="btn btn-info btn-mini" title="Arama Temizle" (click)="firmaAramaTemizle()">
                      <span class="fas fa-sync-alt"></span>
                  </button>
              </span>
            </div>
            </div>
            <div style="clear:both"></div>
            <hr/>
            <dx-data-grid class="devgrid30" #gridTalepFirmaSec
            [dataSource]="firmalist"
            [showBorders]="true"
            [showRowLines]="true" 
            [showColumnLines]="false"
            [showRowLines]="true" 
            [rowAlternationEnabled]="true"
            [focusedRowEnabled]="true"
            [columnAutoWidth]="true"
            [allowColumnResizing]="true"
            keyExpr="FirmaKodu" 
            columnResizingMode = "widget" 
            [allowColumnReordering]="true"  
            (onSelectionChanged)="onFirmaChg($event)"
            (onRowDblClick)="firmaSecimYap()"
            > 
            <dxo-column-fixing [enabled]="true"></dxo-column-fixing>
            <dxo-filter-row [visible]="false"></dxo-filter-row>
            <dxo-header-filter [visible]="false"></dxo-header-filter>
            <dxo-paging [enabled]="false"></dxo-paging>
                        <dxo-load-panel [enabled]="true"></dxo-load-panel> 
            <dxo-header-filter [allowSearch]="false"></dxo-header-filter>
            <dxo-selection mode="single"></dxo-selection>   
                  
            <dxi-column dataField="FirmaAdi" caption="Müşteri Adı" [width]="350"></dxi-column>
    
            <dxi-column dataField="CariTip" caption="Tip" cellTemplate="cellCardType" [width]="10+'%'" alignment="center"></dxi-column>
            <div *dxTemplate="let cc of 'cellCardType'">
                <div>{{cc.value=="S"?'Satıcı':cc.value=="C"? 'Müşteri':'Diğer'}}</div>
            </div> 
            <dxi-column dataField="ParaBirim" caption="Para Birim" [width]="100"></dxi-column>
            <dxi-column dataField="Tel1" caption="Telefon" [width]="125"></dxi-column>
            <dxi-column dataField="VergiN" caption="Vergi/Tckn" [width]="150"></dxi-column>  
            
            </dx-data-grid>  
      </div>
      <div class="modal-footer">
        <button type="button" id="finhspkapat" class="btn btn-danger" (click)="modal.dismiss('Cross click')"  #closeBtn>Vazgeç</button>
        <button type="button" class="btn btn-success" (click)="firmaSecimYap()">Seçim Yap</button>
      </div>
    </ng-template> 
     
    <ng-template #onaytakipmod let-modal>
      <div class="modal-header">
      <h4 class="modal-title" >Onay Takip</h4> 
      <button type="button" class="btn btn-danger" aria-label="Close" (click)="modal.dismiss('Cross click')">
          <span aria-hidden="true">&times;</span>
      </button>
      </div>
      <div class="modal-body">
      <app-onay-durum-kontrol [onayid]="onayid"></app-onay-durum-kontrol>
      </div> 
    </ng-template>   
    
    <ng-template #talepform let-modal>
      <div class="modal-header">
        <h4 class="modal-title" >Talep Form</h4> 
      </div>
      <div style="max-height:100%!important; overflow-y: scroll">
      
      <div class="modal-body" >
         <div class="myIframe">
          <iframe [src]="pdfdata" ></iframe>
      </div>
      </div>
    </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="modal.dismiss('Cross click')">Kapat</button> 
      </div>
    </ng-template>
    
    <ng-template #belgeyukle let-modal>
      <div class="modal-header">
        <h4 class="modal-title" >Belgeler</h4> 
        <button type="button" class="btn btn-danger" data-dismiss="modal" aria-label="Close" (click)="modal.dismiss('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <app-belge-goruntule [semkey]="this.secilikalem.SatirGuid" [kayitid]="this.secilikalem.Id" [ekranid]="1" [secilidata]="this.secilikalem" [defbelgetipid]="1"></app-belge-goruntule>  
    </ng-template> 
    
    <ng-template #belgetarihcemod let-modal>
      <div class="modal-header">
        <h4 class="modal-title" >Tarihçe</h4> 
        <button type="button" class="btn btn-danger" data-dismiss="modal" aria-label="Close" (click)="modal.dismiss('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <app-talep-tarihce [SatirGuid]="this.secilikalem.SatirGuid"></app-talep-tarihce>  
    </ng-template>